<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Sistema de Conferência</title>
  <link rel="stylesheet" href="/src/css/style.css" />
</head>
<body>
  <div id="app-container">
    <header id="topbar">
      <h1>Conferência de Lotes <span id="hdr-conferidos">0 de 0 conferidos</span></h1>
      <button id="helpBtn" title="Ajuda/Atalhos">?</button>
    </header>

    <section id="painel-controle">
      <input type="file" id="input-arquivo" accept=".xlsx" />
      <select id="select-rz"></select>
      <input type="text" id="codigo-ml" placeholder="Código do produto" />
      <button id="btn-scan-toggle" type="button">Ler código</button>
      <video id="preview" playsinline muted style="width:0;height:0;position:absolute;left:-9999px;"></video>
      <input type="number" id="preco-ajustado" placeholder="Preço ajustado" step="0.01" />
      <input type="text" id="observacao" placeholder="Observação" />
      <section id="produto-info" class="card" hidden>
        <div class="card-header">
          <strong id="pi-sku">SKU</strong> — <span id="pi-desc">Descrição</span>
        </div>
        <div class="card-body">
          <div>Qtd: <span id="pi-qtd">0</span></div>
          <div>Preço médio (R$): <span id="pi-preco">0,00</span></div>
          <div>Valor total (R$): <span id="pi-total">0,00</span></div>
          <div>RZ: <span id="pi-rz">—</span></div>
        </div>
      </section>
      <button id="btn-consultar">Consultar</button>
      <button id="btn-registrar">Registrar</button>
      <button id="finalizarBtn">Finalizar Conferência</button>
    </section>

    <section id="resumos">
      <div id="resumoRZ"></div>
      <div id="resumoGeral"></div>
    </section>

    <section id="listas">
      <section id="sec-conferidos" class="section">
        <div class="section-head">
          <h2>Conferidos <span id="count-conferidos">0</span></h2>
          <div>
            <select id="limit-conferidos">
              <option>50</option>
              <option>100</option>
              <option>200</option>
            </select>
            <button id="btn-recolher-conferidos" data-target="sec-conferidos">Recolher</button>
          </div>
        </div>
        <div class="section-body">
          <table id="tbl-conferidos" class="zebra">
            <thead class="sticky">
              <tr>
                <th>SKU</th>
                <th>Descrição</th>
                <th>Qtd</th>
                <th>Preço Médio (R$)</th>
                <th>Valor Total (R$)</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

      <section id="sec-pendentes" class="section">
        <div class="section-head">
          <h2>Pendentes <span id="count-pendentes">0</span></h2>
          <div>
            <select id="limit-pendentes">
              <option>50</option>
              <option>100</option>
              <option>200</option>
            </select>
            <button id="btn-recolher-pendentes" data-target="sec-pendentes">Recolher</button>
          </div>
        </div>
        <div class="section-body">
          <table id="tbl-pendentes" class="zebra">
            <thead class="sticky">
              <tr>
                <th>SKU</th>
                <th>Descrição</th>
                <th>Qtd</th>
                <th>Preço Médio (R$)</th>
                <th>Valor Total (R$)</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

      <section id="sec-excedentes" class="section">
        <div class="section-head">
          <h2>Excedentes <span id="excedentesCount">0</span></h2>
          <button id="btn-recolher-excedentes" data-target="sec-excedentes">Recolher</button>
        </div>
        <div class="section-body">
          <div class="lista-controles">
            <input class="lista-search" data-list="excedentes" placeholder="Buscar por SKU ou descrição" />
            <select class="lista-pagesize" data-list="excedentes">
              <option value="20">20</option>
              <option value="50" selected>50</option>
              <option value="100">100</option>
            </select>
          </div>
          <table class="zebra">
            <thead class="sticky">
              <tr>
                <th>SKU</th>
                <th>Descrição</th>
                <th>Qtd</th>
                <th>Preço Médio (R$)</th>
                <th>Valor Total (R$)</th>
              </tr>
            </thead>
            <tbody id="excedentesTable"></tbody>
          </table>
          <div class="pagination" id="excedentesPagination"></div>
        </div>
      </section>
    </section>
  </div>

  <!-- Banner de status (temporário) -->
  <div id="boot-status" style="position:fixed;right:10px;bottom:10px;padding:6px 10px;border:1px solid #ddd;border-radius:8px;background:#fff;font:12px/1.2 system-ui,z;background-clip:padding-box;box-shadow:0 2px 8px rgba(0,0,0,.08);z-index:9999">
    <strong>Boot:</strong> aguardando…
    <button id="btn-debug" type="button" style="margin-left:8px">Debug</button>
  </div>

  <dialog id="dlg-excedente">
    <form method="dialog" id="form-exc">
      <h3>Registrar Excedente</h3>
      <label>SKU <input id="exc-sku" readonly></label>
      <label>Descrição <input id="exc-desc" required></label>
      <label>Qtd <input id="exc-qtd" type="number" min="1" value="1" required></label>
      <label>Preço unitário (R$) <input id="exc-preco" type="number" step="0.01" min="0.01" required></label>
      <label>Observação <input id="exc-obs"></label>
      <menu>
        <button value="cancel">Cancelar</button>
        <button id="exc-salvar" value="default">Salvar excedente</button>
      </menu>
    </form>
  </dialog>

  <script type="module" src="/src/main.js"></script>
</body>
</html>
